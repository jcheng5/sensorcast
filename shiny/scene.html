<script type="text/javascript" charset="utf-8" src="MathBox.js/build/MathBox-bundle.js"></script>

<script type="text/javascript" charset="utf-8">
  DomReady.ready(function () {
    if (location.href.match(/^file:/)) {
      document.getElementById('info').style.opacity = 1;
      document.getElementById('info').innerHTML = "Sorry. This example does not work when accessed using file://. Please use an http:// host and try again.";
    }
  });
</script>

<script type="text/javascript" charset="utf-8">

function mathboxSetup() {
  // Viewport camera/setup
  mathbox
    // Cartesian viewport
    .viewport({
      type: 'cartesian',
      range: [[-3, 3], [-2, 2], [-1, 1]],
      scale: [1.5, 1, 1],
    })
    .camera({
      orbit: 3.5,
      phi: τ/4,
      theta: -τ/4 + 0.06,
    })
    .transition(300)
  mathbox.grid();

  mathbox.vector({
    id: "vector1",
    data: [[0, 0, 0], [0, 0, 0]]
  });
  mathbox.vector({
    id: "vector2",
    data: [[0, 0, 0], [0, 0, 0]]
  });
  mathbox.vector({
    id: "vector3",
    data: [[0, 0, 0], [0, 0, 0]]
  });
}

var mathboxScript = [
  // Steps go here
  /*
  ['add', 'curve', {
    id: 'my-curve',
    domain: [-3, 3],
    expression: function (x, i) {
      return [x, Math.sin(x), 0];
    },
    // ...
  }, {
    delay: 500,
    duration: 300,
  }],
  */
];

</script>

<script type="text/javascript" charset="utf-8">
/**
 * Bootstrap
 */
DomReady.ready(function() {
  ThreeBox.preload([
    'MathBox.js/shaders/snippets.glsl.html',
  ], function () {

    // MathBox boilerplate
    var mathbox = window.mathbox = mathBox({
      cameraControls: true,
      cursor:         true,
      controlClass:   ThreeBox.OrbitControls,
      elementResize:  true,
      fullscreen:     true,
      screenshot:     true,
      stats:          false,
      scale:          1,
    }).start();

    // Set up director
    var script = window.mathboxScript;
    var director = window.director = new MathBox.Director(mathbox, script);

    // Arrow controls
    // Controls for stand-alone
    window.addEventListener('touchstart', function (e) {
      director.forward();
      document.getElementById('info').style.opacity = '0';
    });
    window.addEventListener('keydown', function (e) {
      if (e.keyCode == 38 || e.keyCode == 37) director.back();
      else if (e.keyCode == 40 || e.keyCode == 39) director.forward();
      else {
        return;
      }

      document.getElementById('info').style.opacity = '0';
    });

    window.mathboxSetup(mathbox);

  });
});
</script>

<style type="text/css" media="screen">
  /**
   * css
   */
  html, body { height: 100%; }
  body { margin: 0; padding: 0 }
  canvas { display: block }

  #info {
    position: absolute;
    left: 50%;
    bottom: 50px;
    z-index: 20;

    width: 300px;
    margin-left: -150px;

    padding: 25px;
    background: rgba(0, 0, 0, .5);
    color: #fff;

    font-family: "Lucida Grande", sans-serif;
    font-size: 16px;
    text-align: center;

    border-radius: 3px;
    text-shadow: 0px 1px 0px rgba(0, 0, 0, .4);

    opacity: 0;
  }

  #info kbd {
    background: #aaa;

    box-shadow: 0px 1px 1px rgba(0, 0, 0, .3);
    border-radius: 3px;
    padding: 3px;
    margin: 3px;

    font-family: inherit;
  }
</style>
